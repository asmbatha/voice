<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Voice</title>

  <link href='https://fonts.googleapis.com/css?family=Raleway:400,300,600,200|Lato:400,300|Open+Sans' rel='stylesheet' type='text/css'>
  <link href="particles.css" rel="stylesheet" type="text/css">
  <link href="heart.css" rel="stylesheet" type="text/css">
  <link href="style.css" rel="stylesheet" type="text/css">
  <style>
  </style>
</head>

<body>
  <div id="particles-js" class="splash">
    <div id="splash">

      <div class="container">
        <div class="logo">
          <span class="ball"></span>
          <span class="ball"></span>
          <div id="splash" role="progressbar">
            <div class="splash">
              <div class="logo-group">
                <svg class="heart-loader" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg"
                  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="119.813" height="75.5"
                  viewBox="0 0 119.813 75.5" version="1.1">
                  <g class="heart-loader-group">
                    <path class="heart-both-loader" stroke-width="2" fill="none" d="M106.055,58.828 C104.558,60.390 106.853,68.616 109.886,73.658 C102.196,70.462 100.440,69.720 95.958,67.878 C92.728,70.405 89.119,72.951 85.099,75.500 C74.616,68.963 66.876,62.451 61.360,56.221 C71.999,45.765 82.515,30.874 79.354,15.367 C81.390,16.841 83.332,18.762 85.099,21.169 C103.175,-3.823 139.743,23.663 106.055,58.828 ZM25.985,61.223 C21.103,63.223 19.189,64.029 10.813,67.500 C14.117,62.025 16.616,53.091 14.986,51.395 C-21.710,13.208 18.123,-16.640 37.813,10.500 C60.893,-20.844 111.387,23.762 37.813,69.500 C33.434,66.731 29.502,63.967 25.985,61.223 Z"
                    />
                    <path class="heart-left-loader" stroke-width="1" fill="none" d="M37.813,10.500 C18.123,-16.640 -21.710,13.208 14.986,51.395 C16.616,53.091 14.117,62.025 10.813,67.500 C19.189,64.029 21.103,63.223 25.985,61.223 C29.502,63.967 33.434,66.731 37.813,69.500 C111.387,23.762 60.893,-20.844 37.813,10.500"
                    />
                    <path class="heart-right-loader" stroke-width="1" fill="none" d="M23.724,9.669 C41.800,-15.323 78.368,12.163 44.680,47.328 C43.183,48.890 45.478,57.116 48.511,62.158 C40.821,58.962 39.065,58.220 34.583,56.378 C31.353,58.905 27.744,61.451 23.724,64.000 C13.241,57.463 5.501,50.951 -0.015,44.721 C10.624,34.265 21.140,19.374 17.979,3.867 C20.015,5.341 21.957,7.262 23.724,9.669 Z"
                    />
                  </g>
                </svg>
              </div>
            </div>
          </div>
        </div>
        <h2>
          VOICE
        </h2>
        <small>A picture says a thousand words</small>
      </div>
    </div>
    <div id="gallery" class="hide">

    </div>
    <div id="menu" class="hide">
      <button id="sphere">SPHERE</button>
      <button id="helix">HELIX</button>
      <button id="grid">GRID</button>
    </div>
  </div>


  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script src="particles-config.js"></script>

  <script src="three.js"></script>
  <script src="tween.min.js"></script>
  <script src="TrackballControls.js"></script>
  <script src="CSS3DRenderer.js"></script>
  <script src="image-promise.min.js"></script>

  <script>
    var table = [
      "Jay Ruzesky", 1084,
      "Sweet Ice Cream Photography", 1083,
      "Lukas Budimaier", 1000,
      "Julien Moreau", 1081,
      "veeterzy", 1080,
      "Kamesh Vedula", 1079,
      "Vladimir Kudinov", 729,
      "Maico Amorim", 1077,
      "Samuel Zeller", 539,
      "Verne Ho", 819,
      "Samuel Scrimshaw", 1074,
      "Patrick Tomasso", 1073,
      "jamie mink", 1072,
      "Tim Stief", 1071,
      "Sean Stratton", 1070,
      "Marat Gilyadzinov", 1069,
      "Padurariu Alexandru", 755,
      "Kevin Young", 1067,
      "Giu Vicente", 1066,
      "Bertrand Zuchuat", 1065,
      "Olivier Miche", 1064,
      "Alexandre Perotto", 953,
      "Matthew Wiebe", 620,
      "Rob Bye", 693,
      "Karl Fredrickson", 1060,
      "Clark Street Mercantile", 1059,
      "Liane Metzler", 583,
      "Stefan Kunze", 782,
      "Susanne Feldt", 1056,
      "Neil Thomas", 1055,
      "Annie Spratt", 940,
      "Ales Krivec", 558,
      "Joseph Barrientos", 653,
      "Rosan Harmens", 1049,
      "Anthony DELANOIX", 742,
      "sergee bee", 1047,
      "Aleksandra Boguslawska", 606,
      "Steve Carter", 1044,
      "Christian Joudrey", 1043,
      "Jeremy Thomas", 1042,
      "Tim Marshall", 1041,
      "Rachel Davis", 1040,
      "Andrew Coelho", 1039,
      "Marcelo Quinan", 901,
      "Jordan McQueen", 695,
      "Wolfgang Lutz", 1036,
      "Jared Erondu", 663,
      "Erez Attias", 1033,
      "NASA", 967,
      "Mike Wilson", 1031,
      "Paul Itkin", 934,
      "freddie marriage", 1029,
      "Dikaseva", 1028,
      "Roksolana Zasiadko", 1027,
      "Dmitrii Vaccinium", 1026,
      "Мартин Тасев", 1024,
      "William Hook", 1023,
      "Vashishtha Jogi", 1022,
      "Frances Gunn", 982,
      "Adam Willoughby-Knox", 1020,
      "Patrick Fore", 925,
      "Andrew Ridley", 1018,
      "Philippe Wuyts", 1016,
      "Alexey Topolyanskiy", 1015,
      "Oscar Keys", 891,
      "Cayton Heath", 1013,
      "Scott Webb", 1012,
      "Roberto Nickson", 1011,
      "Samantha Sophia", 1010,
      "Christopher Campbell", 874,
      "Benjamin Combs", 823,
      "Greg Rakozy", 903,
      "E+N Photographies", 1003,
      "Danielle MacInnes", 1001,
      "Joanna Kosinska", 998,
      "Mickey O'neil", 997,
      "davide ragusa", 629,
      "Jonathan Bean", 664,
      "Eric Huang", 993,
      "Elliott Engelmann", 992,
      "Fritz Bielmeier", 991,
      "Paul Jarvis", 989,
      "Sebastien Gabriel", 740,
      "Oliver & Hen Pritchard-Barrett", 986,
      "Hide Obara", 985,
      "Sylvain Guiheneuc", 984,
      "Anna Anikina", 981,
      "Jean-Marie Grange", 979,
      "María Victoria Heredia Reyes", 978,
      "Manuel Barroso Parejo", 977,
      "Leeroy", 975,
      "Cameron Kirby", 973,
      "Natasha Vasiljeva", 971,
      "Darrell Cassell", 970,
      "Lee Miller", 969,
      "Alberto Restifo", 575,
      "Jon Ottosson", 919,
      "Austin Schmid", 909,
      "Sven Scheuermeier", 961,
      "Paulo Simões Mendes", 960,
      "kazuend", 827,
      "Mike Petrucci", 957,
      "Matt Benson", 955,
      "Todd Quackenbush", 841,
      "Noah Rosenfield", 952,
      "Nitish Kadam", 950,
      "Drew Patrick Miller", 676,
      "Mihail Ribkin", 948,
      "Steve Richey", 945,
      "Tim Swaan", 944,
      "Paul Earle", 931,
      "Carl Nenzen Loven", 942,
      "Ivan Slade", 941,
      "Alec Cutter", 939,
      "Cosmic Timetraveler", 927,
      "Sergei Akulich", 937,
      "LoboStudio Hamburg", 936,
      "delfi de la Rua", 935,
      "Gian-Reto Tarnutzer", 933,
      "Vadim Sherbakov", 932,
      "Dominik Lange", 930,
      "Tiago Muraro", 929,
      "Jose Murillo", 928,
      "Harman Abiwardani", 926,
      "Jakub Sejkora", 924,
      "Sebastian Unrau", 877,
      "Patrick Hendry", 922,
      "Eutah Mizushima", 821,
      "David Marcu", 605,
      "Larry Chen", 916,
      "McDobbie Hu", 915,
      "Viktor Jakovlev", 914,
      "Mikkel Schmidt", 913,
      "Clem Onojeghuo", 912,
      "thomas shellberg", 884,
      "Sudarshan Bhat", 910,
      "Pedro Gandra", 908,
      "Pierre Bouillot", 907,
      "Andras Toth", 906,
      "Caitlin Wynne", 905,
      "Matteo Paganelli", 904,
      "Nitish Meena", 902,
      "Todd DeSantis", 900,
      "Joshua K. Jackson", 899,
      "Jenna Beekhuis", 896,
      "Paula Porto", 894,
      "Eric Micheal", 892,
      "Simon Schmitt", 890,
      "Devin Rajaram", 889,
      "Cristian Baron", 888,
      "Roman Kraft", 887,
      "Glen Carrie", 886,
      "Dustin Lee", 885,
      "Joshua Earle", 548,
      "Bino Storyteller", 882,
      "Fred Viljoen", 880,
      "Nick Scheerbart", 826,
      "Richard Loader", 878,
      "Carmine De Fazio", 876,
      "Raining Huang", 875,
      "Daniel Roe", 873,
      "Brandon Lam", 872,
      "Joshua Hibbert", 870,
      "Caleb Ralston", 869,
      "Jeffrey Swanson", 868,
      "Stefanus Martanto Setyo Husodo", 848,
      "Federico Bottos", 865,
      "Lili Popper", 864,
      "Elijah Hail", 863,
      "Pablo GarciaSaldaña", 861,
      "Skyler Smith", 764,
      "Brennan Ehrhardt", 859,
      "Taylor Jacobs", 858,
      "Dmitry Sytnik", 857,
      "Olu Eletu", 856,
      "Rodion Kutsaev", 855,
      "Stephen Radford", 853,
      "Mark Asthoff", 852,
      "Tiago Aguiar", 807,
      "Andrej Chudy", 847,
      "Jeremy Bishop", 846,
      "Rafael Leão", 845,
      "Joe Beck", 842,
      "Noah Kuhn", 840,
      "Abigail Keenan", 585,
      "London Scout", 822,
      "Yamon Figurs", 837,
      "Lechon Kirb", 804,
      "Olenka Kotyk", 835,
      "The Anchor", 834,
      "Paul Green", 833,
      "hieu le", 832,
      "Luke Pamer", 669,
      "Luca Zanon", 830,
      "Drew Hays", 829,
      "Michael Hull", 825,
      "Pineapples", 824,
      "Aaron Burden", 793,
      "Alex wong", 817,
      "Mayur Gala", 815,
      "Roger Burkhard", 813,
      "Charles Yeager", 811,
      "Luís Perdigão", 810,
      "Namphuong Van", 809,
      "elizabeth lies", 728,
      "Giovanni Corte", 806,
      "Jens Lelie", 805,
      "Saul Cuellar", 803,
      "Sergey Zolkin", 628,
      "Thomas Lefebvre", 577,
      "Yulia Vambold", 799,
      "Gabriel Santiago", 797,
      "Colton Brown", 796,
      "Micah. H", 795,
      "Lauren Coleman", 794,
      "Daniela Cuevas", 791,
      "rebecca johnston", 790,
      "Demi DeHerrera", 789,
      "Michael Baird", 788,
      "Jordan Sanchez", 786,
      "Jean Lakosnyk", 785,
      "Genta Mochizawa", 784,
      "Damir Kotoric", 783,
      "Amy Zhang", 780,
      "John Kutcher", 779,
      "Julia Caesar", 773,
      "Autumn Mott", 776,
      "Austin Ban", 775,
      "Alex Wigan", 774,
      "Modestas Urbonas", 744,
      "Blake Richard Verdoorn", 769,
      "Mikael Kristenson", 768,
      "Grant McIver", 765,
      "Thomas BRAULT", 760,
      "Eli DeFaria", 758,
      "Josh Felise", 654,
      "Garrett Carroll", 741,
      "Siyan Ren", 739,
      "Marta Pawlik", 738,
      "Anthony Indraus", 737,
      "Ben Dumond", 736,
      "wyman H", 735,
      "Ryan Pohanic", 730,
      "Devan Freeman", 727,
      "Caleb George", 726,
      "Nelly Volkovich", 724,
      "Blair Fraser", 723,
      "Sebastian Kostrubala", 722,
      "Jeremy Ricketts", 721,
      "Stefan Ringler", 719,
    ];
    var aoTable = [];

      for (var i = 0; i < table.length; i += 2) {
        aoTable.push(Promise.all([loadImage(`https://picsum.photos/120?image=${table[i + 1]}`), Promise.resolve(table[i])]));
      }

      function reflect(promise){
        return promise.then(
          function(v){ return {v:v, status: "resolved" }}, 
          function(e){ return {e:e, status: "rejected" }}
        );
      }

      Promise.all(aoTable.map(reflect))
        .then(function (results) {
          aoImages = results.filter(x => x.status === "resolved").map(x => x.v);
          setTimeout(() => {
            
            var gallery = document.getElementById('gallery')
            var menu = document.getElementById('menu')
            var splash = document.getElementById('splash')
            var particlesContainer = document.getElementById('particles-js')
            gallery.className = '';
            menu.className = '';
            particlesContainer.className = '';
            splash.className = 'hide';

            init(aoImages);
            animate();
          }, 5000)
        })
        .catch(function (err) {
          console.log('Error Loading Images', err);
        })
    // function fetchImages() {
    // }

    var camera, scene, renderer;
    var controls;

    var objects = [];
    var targets = {
      sphere: [],
      helix: [],
      grid: []
    };

    function isImage(i) {
      return i instanceof HTMLImageElement;
    }
    function init(aoImages) {

      camera = new THREE.PerspectiveCamera(40, window.innerWidth / window.innerHeight, 1, 10000);
      camera.position.z = 3000;

      scene = new THREE.Scene();

      // table

      for (var i = 0; i < aoImages.length; i += 1) {
        if(isImage(aoImages[i][0])){
          var element = document.createElement('div');
          element.className = 'element';

          element.appendChild(aoImages[i][0]);

          var details = document.createElement('div');
          details.className = 'details';
          details.innerHTML = aoImages[i][1];
          element.appendChild(details);

          var object = new THREE.CSS3DObject(element);
          object.position.x = Math.random() * 4000 - 2000;
          object.position.y = Math.random() * 4000 - 2000;
          object.position.z = Math.random() * 4000 - 2000;
          scene.add(object);

          objects.push(object);
        }

      }

      // sphere

      var vector = new THREE.Vector3();
      var spherical = new THREE.Spherical();

      for (var i = 0, l = objects.length; i < l; i++) {

        var phi = Math.acos(-1 + (2 * i) / l);
        var theta = Math.sqrt(l * Math.PI) * phi;

        var object = new THREE.Object3D();

        spherical.set(800, phi, theta);

        object.position.setFromSpherical(spherical);

        vector.copy(object.position).multiplyScalar(2);

        object.lookAt(vector);

        targets.sphere.push(object);

      }

      // helix

      var vector = new THREE.Vector3();
      var cylindrical = new THREE.Cylindrical();

      for (var i = 0, l = objects.length; i < l; i++) {

        var theta = i * 0.175 + Math.PI;
        var y = -(i * 8) + 450;

        var object = new THREE.Object3D();

        cylindrical.set(900, theta, y);

        object.position.setFromCylindrical(cylindrical);

        vector.x = object.position.x * 2;
        vector.y = object.position.y;
        vector.z = object.position.z * 2;

        object.lookAt(vector);

        targets.helix.push(object);

      }

      // grid

      for (var i = 0; i < objects.length; i++) {

        var object = new THREE.Object3D();

        object.position.x = ((i % 5) * 400) - 800;
        object.position.y = (-(Math.floor(i / 5) % 5) * 400) + 800;
        object.position.z = (Math.floor(i / 25)) * 1000 - 2000;

        targets.grid.push(object);

      }

      //

      renderer = new THREE.CSS3DRenderer();
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.domElement.style.position = 'absolute';
      document.getElementById('gallery').appendChild(renderer.domElement);

      //

      controls = new THREE.TrackballControls(camera, renderer.domElement);
      controls.rotateSpeed = 0.5;
      controls.minDistance = 500;
      controls.maxDistance = 6000;
      controls.addEventListener('change', render);

      var button = document.getElementById('sphere');
      button.addEventListener('click', function (event) {

        transform(targets.sphere, 2000);

      }, false);

      var button = document.getElementById('helix');
      button.addEventListener('click', function (event) {

        transform(targets.helix, 2000);

      }, false);

      var button = document.getElementById('grid');
      button.addEventListener('click', function (event) {

        transform(targets.grid, 2000);

      }, false);

      transform(targets.sphere, 2000);

      //

      window.addEventListener('resize', onWindowResize, false);

    }

    function transform(targets, duration) {

      TWEEN.removeAll();

      for (var i = 0; i < objects.length; i++) {

        var object = objects[i];
        var target = targets[i];

        new TWEEN.Tween(object.position)
          .to({
            x: target.position.x,
            y: target.position.y,
            z: target.position.z
          }, Math.random() * duration + duration)
          .easing(TWEEN.Easing.Exponential.InOut)
          .start();

        new TWEEN.Tween(object.rotation)
          .to({
            x: target.rotation.x,
            y: target.rotation.y,
            z: target.rotation.z
          }, Math.random() * duration + duration)
          .easing(TWEEN.Easing.Exponential.InOut)
          .start();

      }

      new TWEEN.Tween(this)
        .to({}, duration * 2)
        .onUpdate(render)
        .start();

    }

    function onWindowResize() {

      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();

      renderer.setSize(window.innerWidth, window.innerHeight);

      render();

    }

    function animate() {

      requestAnimationFrame(animate);

      TWEEN.update();

      controls.update();

    }

    function render() {

      renderer.render(scene, camera);

    }
  </script>
</body>

</html>